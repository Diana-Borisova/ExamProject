<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="/fragments/fragments::head"></head>
<body>
<nav th:replace="/fragments/fragments::navbar"></nav>
<div class="container top-container">
	<a class="btn btn-primary m-4" id="addFoodProductLink" data-toggle="modal" th:href="@{/addFoodProduct}">Pridėti</a>
	<table class="table">
		<thead>
		<tr>
			<th scope="col">#</th>
			<th scope="col">Pavadinimas</th>
			<th scope="col">Kategorija</th>
			<th scope="col">Tankis (g/ml)</th>
			<th scope="col">Kalorijos</th>
			<th scope="col">Baltymai</th>
			<th scope="col">Riebalai</th>
			<th scope="col">Angliavandeniai</th>
			<th></th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="product, status : ${foodProducts}">
			<th th:text="${status.index+1}"></th>
			<td th:text="${product.name}"></td>
			<td th:text="${product.foodType.label}"></td>
			<td th:text="${product.nutrition.density}"></td>
			<td th:text="${product.nutrition.kcal}"></td>
			<td th:text="${product.nutrition.protein}"></td>
			<td th:text="${product.nutrition.fat}"></td>
			<td th:text="${product.nutrition.carbs}"></td>
			<!-- Uncomment the following line if you want to use a link for deletion -->
			<!-- <td><a th:href="@{'/deleteFoodProduct?id=' + ${product.id}}">Pašalinti</a></td> -->
		</tr>
		</tbody>
	</table>
</div>

<div class="modal fade" id="addFoodProductModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
	 aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Pridėti produktą į sistemą:</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form th:action="@{/addFoodProduct}" class="form-horizontal" method="post" th:object="${foodProduct}"
					  enctype="multipart/form-data">
					<label for="name">Pavadinimas</label>
					<input type="text" class="form-control" id="name" th:field="*{name}" required="true" />
					<label for="foodType">Kategorija:</label>
					<select class="form-control" id="foodType" th:field="*{foodType}" required="true">
						<option th:each="type : ${foodTypes}" th:value="${type}" th:text="${type.label}"></option>
					</select>
					<label for="density">Tankis (g/ml):</label>
					<input type="number" class="form-control" id="density" min="0" step="0.01" th:field="*{nutrition.density}"
						   required="true" />
					<!-- Add the remaining fields similarly -->
					<button type="submit" class="btn btn-primary">Išsaugoti</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Atšaukti</button>
				</form>
			</div>
		</div>
	</div>
</div>

<!-- Uncomment the following block if you want to use a delete confirmation modal -->
<!--
<div class="modal fade" id="deleteFoodProductModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Naikinti maisto produktą</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Prieš naikindami įsitikinkite ar produktas nėra naudojamas.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Naikinti</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
-->

<th:block th:replace="/fragments/fragments::footer"></th:block>
</body>
</html>